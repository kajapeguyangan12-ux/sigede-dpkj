rules_version = '2';

// Firebase Storage Security Rules - Development Mode
// More permissive rules for admin panel functionality
service firebase.storage {
  match /b/{bucket}/o {
    
    // E-News folder - allow any authenticated user (including anonymous)
    match /e-news/{filename} {
      allow read: if true; // Public read
      allow write, delete: if request.auth != null || true; // Allow even unauthenticated for dev
    }
    
    // Pengumuman folder - allow any authenticated user
    match /pengumuman/{filename} {
      allow read: if true; // Public read
      allow write, delete: if request.auth != null || true; // Allow even unauthenticated for dev
    }
    
    // Ucapan Selamat Datang
    match /ucapan-selamat-datang.jpg {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Foto Kepala Desa
    match /kepala-desa.jpg {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Slideshow images
    match /slideshow/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Popup images
    match /popup/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Profil Desa images
    match /profil-desa/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Wisata Budaya images
    match /wisata-budaya/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // E-UMKM images
    match /e-umkm/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Layanan Publik images
    match /layanan-publik/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Data Desa KK Excel files
    match /data-desa-kk/{filename} {
      allow read: if true; // More permissive for dev
      allow write, delete: if request.auth != null || true;
    }
    
    // Regulasi documents
    match /regulasi/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true;
    }
    
    // Keuangan documents
    match /keuangan/{filename} {
      allow read: if true; // More permissive for dev
      allow write, delete: if request.auth != null || true;
    }
    
    // User profile pictures
    match /users/{userId}/{filename} {
      allow read: if true;
      allow write, delete: if request.auth != null || true; // More permissive for dev
    }
    
    // Default rule - allow read for development
    match /{allPaths=**} {
      allow read: if true;
      allow write: if request.auth != null || true;
    }
  }
}